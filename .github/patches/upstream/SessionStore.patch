diff --git a/browser/components/sessionstore/SessionStore.sys.mjs b/browser/components/sessionstore/SessionStore.sys.mjs
index e31ad7f335966..031621c4c9ca6 100644
--- a/browser/components/sessionstore/SessionStore.sys.mjs
+++ b/browser/components/sessionstore/SessionStore.sys.mjs
@@ -1064,6 +1064,28 @@ var SessionStoreInternal = {
     );
 
     if (state) {
+      /*@nora:inject:start*/
+      // This code needs to be injected to restore the windows
+      // Some of reasons, Floorp Webpanel breaks last closed windows
+      // We consider the last closed windows as the last session
+      if (!state.windows.length) {
+        console.warn("Floorp Injections: No windows found in state");
+        const lastSessionWindows = state._closedWindows;
+        let closedTime = lastSessionWindows[0].closedAt;
+        for (let i = 0; i < lastSessionWindows.length; i++) {
+          let closedWindowTime = lastSessionWindows[i].closedAt;
+          // If the last closed window is closed in +-2000, we will restore it
+          if (
+            closedWindowTime >= closedTime - 10000 &&
+            closedWindowTime <= closedTime + 10000
+          ) {
+            state.windows.push(lastSessionWindows[i]);
+            state._closedWindows.splice(i, 1);
+          }
+        }
+      }
+      /*@nora:inject:end*/
+
       try {
         // If we're doing a DEFERRED session, then we want to pull pinned tabs
         // out so they can be restored.
@@ -4533,6 +4555,31 @@ var SessionStoreInternal = {
       winData.sizemodeBeforeMinimized = winData.sizemode;
     }
 
+    /*@nora:inject:start*/
+    // Old Workspaces code for compatibility
+    let workspacesWindowId = aWindow.workspacesWindowId;
+    if (workspacesWindowId) {
+      winData.workspacesWindowId = workspacesWindowId;
+    } else {
+      delete winData.workspacesWindowId;
+    }
+
+    // New Workspaces code
+    // Save Window Attributes for Restore Workspace feature
+    let floorpSelectedWorkspace = aWindow.floorpSelectedWorkspace;
+    if (floorpSelectedWorkspace) {
+      winData.floorpSelectedWorkspace = floorpSelectedWorkspace;
+    } else {
+      delete winData.floorpSelectedWorkspace;
+    }
+
+    // Make do not save Floorp's webpanel & PWA or SSB windows
+    let floorpShouldNotRestore = !!(
+      aWindow.floorpWebPanelWindow || aWindow.floorpSsbWindow
+    );
+    winData.floorpShouldNotRestore = floorpShouldNotRestore;
+    /*@nora:inject:end*/
+
     var hidden = WINDOW_HIDEABLE_FEATURES.filter(function (aItem) {
       return aWindow[aItem] && !aWindow[aItem].visible;
     });
@@ -5584,6 +5631,21 @@ var SessionStoreInternal = {
       }
     }
 
+    /*@nora:inject:start*/
+    const { workspacesWindowId, floorpSelectedWorkspace } = aWinData;
+    if (workspacesWindowId) {
+      aWindow.workspacesWindowId = workspacesWindowId;
+    } else {
+      aWindow.workspacesWindowId = Services.uuid.generateUUID().toString();
+    }
+
+    if (floorpSelectedWorkspace) {
+      aWindow.floorpSelectedWorkspace = floorpSelectedWorkspace;
+    } else {
+      aWindow.floorpSelectedWorkspace = null;
+    }
+    /*@nora:inject:end*/
+
     aWindow.setTimeout(() => {
       this.restoreDimensions(
         aWindow,
